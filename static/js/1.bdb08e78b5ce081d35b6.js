webpackJsonp([1],{"/p74":function(e,t){},AbuL:function(e,t){},DryE:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Xxa5"),r=a.n(n),s=a("exGp"),i=a.n(s),o=a("Z9RD"),l=a("M4fF"),c=a.n(l),u=a("PJh5"),p=a.n(u),m=a("JMoU"),d={name:"PlayerSearch",props:["value"],data:function(){return{username:""}},methods:{querySearchAsync:function(e,t){var a=this;return i()(r.a.mark(function n(){var s;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a.$store.dispatch("player/search",e);case 3:s=n.sent,t(s.map(function(e){return{id:e.id,value:e.username}})),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),a.$message({type:"error",message:n.t0.message});case 10:case"end":return n.stop()}},n,a,[[0,7]])}))()},clear:function(){this.$emit("input",null)},handleSelect:function(e){this.$emit("input",e.id)}}},b={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-autocomplete",{attrs:{"popper-class":"player-search-wrapper",placeholder:"Player","fetch-suggestions":e.querySearchAsync,clearable:""},on:{clear:e.clear,select:e.handleSelect},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})},staticRenderFns:[]};var f=a("VU/8")(d,b,!1,function(e){a("AbuL")},null,null).exports,y=a("0xDb"),h={name:"BetBox",mixins:[m.a],components:{PlayerSearch:f},props:["draw"],data:function(){return{player:{agent_id:null,player_id:null,contact_no:null,draw_id:null,max_accumulated:null,combinations:[]},playerRules:{contact_no:[{required:!0,message:"Please input contact #",trigger:"blur"}]},entry:{bet:0,isramble:"S",input:""},entryRules:{input:[{required:!0,message:"Please input combination",trigger:"blur"}]},showDialog:!1,inProgress:!1}},computed:{maxInput:function(){var e=this.draw,t=e.numberformat,a=e.maxinput;return"0-9"==t?a:6},dialog:function(){return this.draw?{title:this.draw.name,date:p()().format("MMMM DD, YYYY")}:null}},mounted:function(){this.reset()},methods:{handleClose:function(e){"function"==typeof e&&e()},reset:function(){this.player={agent_id:this.$user.id,player_id:null,contact_no:null,draw_id:this.draw.id,max_accumulated:this.draw.max_accumulated,combinations:[]},this.entry={bet:this.draw.minimumbet,isramble:"3d_rambol"==this.draw.draw_type?"S":"R",input:""}},openDialog:function(){this.showDialog=!0},closeDialog:function(){this.showDialog=!1,this.reset()},isNumber:function(e){var t=(e=e||window.event).which?e.which:e.keyCode;if(!(t>31&&(t<48||t>57)&&46!==t))return!0;e.preventDefault()},removeEntry:function(e){var t=this.player.combinations.indexOf(e);t>-1&&this.player.combinations.splice(t,1)},clearEntries:function(){this.player.combinations=[]},handleEntry:function(){var e=this;return i()(r.a.mark(function t(){var a,n,s,i,o,l;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.draw,n=e.entry,"0-9"!=a.numberformat){t.next=20;break}if(s=e.entry.input.split(""),"3d_rambol"!=a.draw_type){t.next=19;break}if("R"!=n.isramble){t.next=16;break}if(i=y.a.Math.permutation(s),o=n.bet/i.length,l=i.map(function(e){return{combination:e.join("-"),isramble:n.isramble,bet:o}}),!(o<a.minimumbet)){t.next=13;break}throw new Error("Your Bet Amount is not enough");case 13:e.player.combinations=e.player.combinations.concat(l);case 14:t.next=17;break;case 16:e.player.combinations.push({combination:s.join("-"),bet:n.bet,isramble:n.isramble});case 17:t.next=20;break;case 19:e.player.combinations.push({combination:s.join("-"),bet:n.bet,isramble:n.isramble});case 20:case"end":return t.stop()}},t,e)}))()},queue:function(){var e=this;return i()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.handleEntry();case 3:e.entry.bet=e.draw.minimumbet,e.entry.input="",t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e.$message({type:"error",message:t.t0.message});case 10:case"end":return t.stop()}},t,e,[[0,7]])}))()},send:function(){var e=this;return i()(r.a.mark(function t(){var a,n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.inProgress){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,e.inProgress=!0,t.next=6,e.$store.dispatch("bet/send",e.player);case 6:e.closeDialog(),e.$message({type:"success",message:"Bet successful!"}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),(a=t.t0.response)&&(n=a.data)&&n.message?c.a.isArray(n.message)&&n.message.forEach(function(t){e.$message({type:"error",message:t})}):e.$message({type:"error",message:t.t0.message});case 14:e.inProgress=!1;case 15:case"end":return t.stop()}},t,e,[[2,10]])}))()}}},v={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"bet-box-wrapper"},[a("el-button",{staticClass:"draw",attrs:{type:"primary",size:"large"},on:{click:e.openDialog}},[a("label",[e._v(e._s(e.draw.name))])]),e._v(" "),a("el-dialog",{attrs:{"custom-class":"page-dialog bet-box-wrapper",visible:e.showDialog,"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,"before-close":e.handleClose,width:"50%","append-to-body":""},on:{"update:visible":function(t){e.showDialog=t}}},[a("template",{slot:"title"},[e.dialog?a("div",{attrs:{layout:"row","layout-align":"space-between center"}},[a("header",{staticClass:"dialog-title"},[e._v(e._s(e.dialog.title))]),e._v(" "),a("div",[e._v(e._s(e.dialog.date))])]):e._e()]),e._v(" "),e.showDialog?a("section",[a("el-card",{staticClass:"player-bets",attrs:{shadow:"hover"}},[a("el-form",{ref:"player",attrs:{inline:!0,rules:e.playerRules,model:e.player}},[a("el-form-item",{attrs:{label:"Player",prop:"player_id"}},[a("player-search",{model:{value:e.player.player_id,callback:function(t){e.$set(e.player,"player_id",t)},expression:"player.player_id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Contact No.",prop:"contact_no"}},[a("el-input",{model:{value:e.player.contact_no,callback:function(t){e.$set(e.player,"contact_no",t)},expression:"player.contact_no"}})],1)],1),e._v(" "),a("el-table",{staticStyle:{"margin-top":"10px"},attrs:{height:"200",loading:e.inProgress,data:e.player.combinations}},[a("el-table-column",{attrs:{label:"Number",prop:"combination",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"Amount",prop:"bet",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"Action",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popconfirm",{attrs:{"confirm-button-type":"danger","confirm-button-text":"Delete","cancel-button-text":"Cancel",icon:"el-icon-info","icon-color":"red",title:"Do you want remove this?"},on:{confirm:function(a){return e.removeEntry(t.row)}}},[a("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-delete"},slot:"reference"})],1)]}}],null,!1,4012774828)})],1),e._v(" "),a("div",{staticClass:"controls",attrs:{layout:"row","layout-align":"end center"}},[a("el-popconfirm",{attrs:{"confirm-button-type":"danger","confirm-button-text":"Clear","cancel-button-text":"Cancel",title:"Do you want clear all?"},on:{confirm:e.clearEntries}},[a("el-button",{attrs:{slot:"reference",type:"danger",disbaled:e.inProgress},slot:"reference"},[a("span",[e._v("Clear")])])],1),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",loading:e.inProgress},on:{click:e.send}},[a("span",[e._v("Send")])])],1)],1),e._v(" "),a("el-card",{staticClass:"bet-entry-wrapper",attrs:{shadow:"hover"}},[a("el-form",{attrs:{form:"entry",inline:!0,model:e.entry,rules:e.entryRules},nativeOn:{submit:function(t){return t.preventDefault(),e.queue(t)}}},[a("el-form-item",{attrs:{label:"Combinations",prop:"entry"}},[a("el-input",{attrs:{placeholder:"Combinations",maxlength:e.maxInput},nativeOn:{keypress:function(t){return e.isNumber(t)},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.queue(t)}},model:{value:e.entry.input,callback:function(t){e.$set(e.entry,"input",t)},expression:"entry.input"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Amount"}},[a("el-input-number",{attrs:{min:e.draw.minimumbet,max:e.draw.maxbet},model:{value:e.entry.bet,callback:function(t){e.$set(e.entry,"bet",t)},expression:"entry.bet"}})],1),e._v(" "),"3d_rambol"==e.draw.draw_type?a("el-form-item",{attrs:{label:"Ramble",prop:"isramble"}},[a("el-switch",{attrs:{"active-value":"R","inactive-value":"S"},model:{value:e.entry.isramble,callback:function(t){e.$set(e.entry,"isramble",t)},expression:"entry.isramble"}})],1):e._e()],1),e._v(" "),a("div",{attrs:{layout:"row","layout-align":"space-between center"}},[a("el-alert",{attrs:{closable:!1,"show-icon":""}},[a("span",[e._v(e._s("Minimum bet is "+e.draw.minimumbet+". Maximum bet is "+e.draw.maxbet+"."))])]),e._v(" "),a("el-divider",{attrs:{direction:"vertical"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.queue}},[a("span",[e._v("Queue")])])],1)],1)],1):e._e(),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{disabled:e.inProgress},on:{click:e.closeDialog}},[a("span",[e._v("Close")])])],1)],2)],1)},staticRenderFns:[]};var g=a("VU/8")(h,v,!1,function(e){a("/p74")},null,null).exports,w={name:o.a.key,components:{BetBox:g},data:function(){return{route:o.a,drawList:null,hasError:!1,isLoading:!0}},computed:{data:function(){return this.drawList?this.drawList:[]}},mounted:function(){var e=this;return i()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("bet/list");case 3:e.drawList=t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),e.$message({type:"error",message:t.t0.message});case 9:e.isLoading=!1;case 10:case"end":return t.stop()}},t,e,[[0,6]])}))()},methods:{}},_={render:function(){var e=this.$createElement,t=this._self._c||e;return t("section",{directives:[{name:"loading",rawName:"v-loading",value:this.isLoading,expression:"isLoading"}],staticClass:"page page-bet",attrs:{layout:"column"}},[t("header",{staticClass:"page-title"},[this._v(this._s(this.route.name))]),this._v(" "),t("div",{staticClass:"page-content",attrs:{layout:"row"}},this._l(this.drawList,function(e,a){return t("bet-box",{key:a,attrs:{draw:e}})}),1)])},staticRenderFns:[]};var x=a("VU/8")(w,_,!1,function(e){a("vO22")},null,null);t.default=x.exports},vO22:function(e,t){}});
//# sourceMappingURL=1.bdb08e78b5ce081d35b6.js.map